import{a as S,i as p,S as _,b as N,N as I,P as D,A as Z,R as J}from"./assets/vendor-Cfl2UIWb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();window.addEventListener("scroll",()=>{const e=document.querySelector(".header");window.scrollY>30?e.classList.add("scrolled"):e.classList.remove("scrolled")});(()=>{const e={openModalBtn:document.querySelector("[data-menu-open]"),closeModalBtn:document.querySelector("[data-menu-close]"),modal:document.querySelector("[data-menu]"),menuLinks:document.querySelectorAll("[data-scroll-to]")};e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",s);function t(){e.modal.classList.add("is-open"),n(!0),e.menuLinks.forEach(l=>l.addEventListener("click",a)),e.modal.addEventListener("click",o),document.addEventListener("keydown",d)}function s(){e.modal.classList.remove("is-open"),n(!1),e.menuLinks.forEach(l=>l.removeEventListener("click",a)),e.modal.removeEventListener("click",o),document.removeEventListener("keydown",d)}function n(l){document.body.style.overflow=l?"hidden":""}function a(l){l.preventDefault();const v=l.currentTarget.dataset.scrollTo;s(),setTimeout(()=>{var f;(f=document.getElementById(v))==null||f.scrollIntoView({behavior:"smooth",block:"start"})},300)}function o(l){l.target===e.modal&&s()}function d(l){l.key==="Escape"&&s()}})();const $="https://paw-hut.b.goit.study/api";async function K(){try{return(await S.get(`${$}/categories`)).data}catch(e){p.error({message:`Помилка при отриманні категорій  з сервера:' ${e}`})}}async function Y(e=null,t=1,s=9){try{const n={page:t,limit:s};return e&&(n.categoryId=e),(await S.get(`${$}/animals`,{params:n})).data}catch(n){p.error({message:`Помилка при отриманні тварин з сервера: ${n}`})}}const r={filtersContainer:document.querySelector(".pets-list-categories"),animalsContainer:document.querySelector(".pets-list-animals"),loadMoreBtn:document.querySelector(".pets-list-load-more-btn"),loader:document.querySelector(".pet-list-loader.loader"),paginationList:document.querySelector(".pagination-list"),loaderTop:document.querySelector(".pet-list-loader-top")};function G(e){const t=["","Собаки","Коти","Кролики","Гризуни","Птахи","Тварини з особливими потребами","Терміново шукають дім"];e.sort((s,n)=>{const a=t.indexOf(s.name),o=t.indexOf(n.name);return a-o}),r.filtersContainer.innerHTML=`
    <li class="filter-item"><button class="filter-btn active" data-id="">Всі</button></li>
    ${e.map(s=>`<li class="filter-item"><button class="filter-btn" data-id="${s._id}">${s.name}</button></li>`).join("")}
      
  `}function X(e,t=!1){t||(r.animalsContainer.innerHTML="");const s=e.map(n=>{const a=n.categories.map(o=>`<li class="animal-card-category">${o.name}</li>`).join("");return`
    <li class="animal-card">
        <img src="${n.image}" alt="${n.name}" class="animal-img" />
        
          <div class="animal-card-content">
          <div class="animal-card-wrapper">
            <div class="animal-card-details">
              <span class="animal-card-species">${n.species} </span>
              <h3 class="animal-card-name">${n.name}</h3>
              <ul class="animal-card-categories">
                ${a}
              </ul>
              <div class="animal-card-info">
                <span>${n.age}</span>
                <span>${n.gender}</span>
              </div>
            </div>
            <p class="animal-card-short-description">
              ${n.shortDescription}
            </p>
        </div>
          <button class="more-btn" data-id="${n._id}">
            Дізнатись більше
          </button>
        </div>
      </li>
  `}).join("");r.animalsContainer.insertAdjacentHTML("beforeend",s)}function Q(){if(c<=1){r.paginationList.innerHTML="";return}let e="";if(e+=`
    <li>
      <button class="arrow-button"
        data-action="prev"
        ${i===1?"disabled":""}>
        <svg width="19" height="13">
        <use href="/Lapolis-JS-project/assets/icons-D8Flmos2.svg#icon-left"></use>
      </svg>
      </button>
    </li>`,i===1){for(let t=1;t<=Math.min(3,c);t++)e+=g(t);c>3&&(e+='<li class="empty-space">…</li>',e+=g(c))}else{e+=g(1),i>3&&(e+='<li class="empty-space">…</li>');for(let t=i-1;t<=i+1;t++)t>1&&t<c&&(e+=g(t));i<c-2&&(e+='<li class="empty-space">…</li>'),e+=g(c)}e+=`
    <li>
      <button class="arrow-button"
        data-action="next"
        ${i===c?"disabled":""}>
        <svg width="19" height="13">
        <use href="/Lapolis-JS-project/assets/icons-D8Flmos2.svg#icon-right"></use>
      </svg>
      </button>
    </li>`,r.paginationList.innerHTML=e}function g(e){return`
    <li>
      <button class="page-button ${e===i?"active":""}"
        data-page="${e}">
        ${e}
      </button>
    </li>`}function k(){r.loader.classList.remove("hidden")}function E(){r.loader.classList.add("hidden")}function ee(){r.loaderTop.classList.remove("hidden")}function te(){r.loaderTop.classList.add("hidden")}let y=[],F="",i=1,w=9,q=0,c=1;async function se(e){if(!e.target.classList.contains("filter-btn"))return;r.filtersContainer.querySelectorAll(".filter-btn").forEach(s=>s.classList.remove("active")),e.target.classList.add("active"),F=e.target.dataset.id,i=1,r.loadMoreBtn.style.display="block",B()?r.loadMoreBtn.style.display="none":r.loadMoreBtn.style.display="block",ee();try{await M(!1)}catch(s){p.error({message:`Помилка завантаження тварин ${s}`})}finally{te()}}async function ne(){if(!B()){r.loadMoreBtn.style.display="none",k();try{i+=1,await M(!0)?r.loadMoreBtn.style.display="block":r.loadMoreBtn.style.display="none"}catch(e){p.error({message:`Помилка завантаження тварин ${e}`}),r.loadMoreBtn.style.display="block"}finally{E()}}}async function ae(e){const t=e.target.closest("button");if(t){t.dataset.page&&(i=Number(t.dataset.page)),t.dataset.action==="prev"&&i>1&&(i-=1),t.dataset.action==="next"&&i<c&&(i+=1),oe(),k();try{await M(!1)}catch(s){p.error({message:`Помилка завантаження тварин ${s}`})}finally{E()}}}async function M(e=!1){try{const t=new Promise(a=>setTimeout(a,1e3)),[s]=await Promise.all([Y(F,i,w),t]);if(!s.animals)return!1;q=s.totalItems,c=Math.ceil(q/w);const n=s.animals;return re(n,e),B()?(Q({currentPage:i,totalPages:c}),!1):i<c}catch(t){p.error({message:`Помилка завантаження тварин ${t}`})}}function re(e,t=!1){t?y=y.concat(e):y=e,X(e,t)}function x(){window.innerWidth>=1440?(w=9,r.loadMoreBtn.classList.add("hidden"),r.paginationList.classList.remove("hidden")):(w=8,r.loadMoreBtn.classList.remove("hidden"),r.paginationList.classList.add("hidden"))}function B(){return window.innerWidth>=1440}function oe(){const s=r.animalsContainer.getBoundingClientRect().top+window.pageYOffset-110,n=window.pageYOffset,a=s-n,o=performance.now();function d(l){const v=l-o,f=Math.min(v/1e3,1);window.scrollTo({top:n+a*f}),f<1&&requestAnimationFrame(d)}requestAnimationFrame(d)}const u=document.querySelector(".order-form"),b=(e,t)=>{const s=u.querySelector(`[data-error-for="${e.name}"]`);s&&(s.textContent=t,s.style.display="block",e.classList.add("is-error"),e.classList.remove("is-valid"))},A=e=>{const t=u.querySelector(`[data-error-for="${e.name}"]`);t&&(t.textContent="",t.style.display="none",e.classList.remove("is-error"),e.classList.add("is-valid"))},H=e=>{const t=/^[A-Za-zА-Яа-яІіЇїЄєҐґ\s]+$/,s=e.value.trim();return s.length<2?(b(e,"Імʼя повинно містити мінімум 2 літери"),!1):t.test(s)?(A(e),!0):(b(e,"Імʼя може містити тільки букви"),!1)},U=e=>e.value.replace(/\D/g,"").length!==12?(b(e,"Номер телефону повинен містити 12 цифр"),!1):(A(e),!0),j=e=>e.value.length>500?(b(e,"Коментар не може перевищувати 500 символів"),!1):(A(e),!0);u.name.addEventListener("input",()=>{H(u.name)});u.phone.addEventListener("input",()=>{U(u.phone)});u.comment.addEventListener("input",()=>{j(u.comment)});u.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.dataset.animalId,{name:s,phone:n,comment:a}=e.target.elements;if(!(H(s)&U(n)&j(a)))return;const d=n.value.replace(/\D/g,""),l={name:s.value.trim(),phone:d,animalId:t};a.value.trim()&&(l.comment=a.value.trim());try{await S.post(`${$}/orders`,l),_.fire({title:"Хороша робота!",text:"Заявка відправлена!",icon:"success"}),u.reset(),L.classList.add("hidden"),document.body.classList.remove("no-scroll")}catch{_.fire({title:"Ой ой",text:"Якась помилка — спробуй ще",icon:"error"})}});const ie="/Lapolis-JS-project/assets/icons-D8Flmos2.svg",L=document.querySelector(".modal-overlay"),C=L.querySelector(".info-modal"),P=L.querySelector(".order-modal");function V(e){e.key==="Escape"&&z()}function le(){L.classList.remove("hidden"),document.body.classList.add("no-scroll"),document.addEventListener("keydown",V)}function z(){L.classList.add("hidden"),document.body.classList.remove("no-scroll"),document.removeEventListener("keydown",V)}function ce(e,t){e.classList.add("hidden"),t.classList.remove("hidden"),document.body.classList.add("no-scroll")}function de(){document.addEventListener("click",e=>{if(e.target.classList.contains("more-btn")){const t=e.target.dataset.id,s=y.find(n=>n._id===t);if(!s)return;u.dataset.animalId=t,C.innerHTML=`
        <button class="close-btn"><svg class="close-svg" width="32" height="32">
        <use href="${ie}#icon-close"></use>
      </svg></button>
        <div class="modal-body">
          <div class="modal-left">
            <img class="modal-animal-img" src="${s.image}" alt="${s.name}" />
          </div>
          <div class="modal-right">
            <div class="modal-info-head">
              <span class="modal-species">${s.species}</span>
              <h2 class="modal-name">${s.name}</h2>
              <div class="modal-info">
                <span class="modal-age">${s.age}</span>
                <span class="modal-gender">${s.gender}</span>
              </div>
            </div>
            <p><strong>Опис:</strong> <span class="modal-description">${s.description}</span></p>
            <p><strong>Здоров'я:</strong> <span class="modal-health">${s.healthStatus}</span></p>
            <p><strong>Поведінка:</strong> <span class="modal-behavior">${s.behavior}</span></p>
            <button class="modal-adopt-btn">Взяти додому</button>
          </div>
        </div>`,C.classList.remove("hidden"),P.classList.add("hidden"),le();return}if(e.target.classList.contains("close-btn")||e.target.classList.contains("modal-overlay")){z();return}e.target.closest(".modal-adopt-btn")&&ce(C,P)})}async function ue(){try{x(),window.addEventListener("resize",()=>{x()}),k();const e=await K();G(e),r.filtersContainer.addEventListener("click",se),r.loadMoreBtn.addEventListener("click",ne),await M()}catch(e){p.error({message:`Помилка завантаження тварин: ${e}`})}finally{E()}}r.paginationList.addEventListener("click",ae);de();ue();const h=new N(".about-swiper",{modules:[I,D],slidesPerView:1,loop:!1,spaceBetween:0,observer:!0,observeParents:!0,navigation:{nextEl:".next-btn",prevEl:".prev-btn"},pagination:{el:".about-controls .swiper-pagination",type:"bullets",clickable:!0,dynamicBullets:window.innerWidth<768,dynamicMainBullets:1}});function me(){const e=window.innerWidth<768;h.params.pagination.dynamicBullets=e,h.pagination.destroy(),h.pagination.init(),h.pagination.render(),h.pagination.update()}window.addEventListener("resize",()=>{me()});document.addEventListener("DOMContentLoaded",()=>{new Z(".faq-container",{duration:300,collapse:!0,showMultiple:!1})});const pe="https://paw-hut.b.goit.study",fe="API/feedbacks",ge=3,he=new URL("data:image/svg+xml,%3csvg%20width='20'%20height='19'%20viewBox='0%200%2020%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.53125%200.806641C9.70323%200.398163%2010.2968%200.398159%2010.4688%200.806641L12.4971%205.625C12.7155%206.14358%2013.2076%206.49471%2013.7676%206.53906L19.0332%206.95605C19.4909%206.99232%2019.6545%207.54121%2019.3242%207.82129L15.3115%2011.2168C14.8819%2011.5804%2014.6919%2012.1542%2014.8242%2012.7021L16.0508%2017.7783C16.1502%2018.1902%2015.6892%2018.5518%2015.291%2018.3115H15.29L10.7832%2015.5918C10.3023%2015.3016%209.6977%2015.3016%209.2168%2015.5918L4.70898%2018.3115C4.31078%2018.5518%203.84983%2018.1902%203.94922%2017.7783L5.17578%2012.7021C5.30809%2012.1543%205.11814%2011.5805%204.68848%2011.2168L0.675781%207.82129C0.345442%207.54122%200.509097%206.99231%200.966797%206.95605L6.23242%206.53906C6.79243%206.49471%207.28456%206.14369%207.50293%205.625L9.53125%200.806641Z'%20fill='url(%23paint0_linear_8242_16265)'%20stroke='%2302060A'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_8242_16265'%20x1='0'%20y1='9.37158'%20x2='20'%20y2='9.37158'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20offset='0.5'%20stop-color='%2302060A'/%3e%3cstop%20offset='0.5'%20stop-color='%2302060A'%20stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",import.meta.url).href,Le=new URL("data:image/svg+xml,%3csvg%20width='20'%20height='19'%20viewBox='0%200%2020%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.07088%200.612343C9.41462%20-0.204115%2010.5854%20-0.204114%2010.9291%200.612346L12.9579%205.43123C13.1029%205.77543%2013.4306%206.01061%2013.8067%206.0404L19.0727%206.45748C19.9649%206.52814%2020.3267%207.62813%2019.6469%208.2034L15.6348%2011.5987C15.3482%2011.8412%2015.223%2012.2218%2015.3106%2012.5843L16.5363%2017.661C16.744%2018.5211%2015.7969%2019.201%2015.033%2018.7401L10.5245%2016.0196C10.2025%2015.8252%209.7975%2015.8252%209.47548%2016.0196L4.96699%2018.7401C4.20311%2019.201%203.25596%2018.5211%203.46363%2017.661L4.68942%2012.5843C4.77698%2012.2218%204.65182%2011.8412%204.36526%2011.5987L0.353062%208.2034C-0.326718%207.62813%200.0350679%206.52814%200.927291%206.45748L6.19336%206.0404C6.5695%206.01061%206.89716%205.77543%207.04207%205.43123L9.07088%200.612343Z'%20fill='%2302060A'/%3e%3c/svg%3e",import.meta.url).href,ve=new URL("data:image/svg+xml,%3csvg%20width='20'%20height='19'%20viewBox='0%200%2020%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.0078%201.00098L12.0361%205.81934C12.328%206.51225%2012.9837%206.97813%2013.7275%207.03711L18.9854%207.45312L14.9893%2010.835H14.9883C14.4157%2011.3197%2014.1618%2012.086%2014.3389%2012.8193L15.5615%2017.8848C15.5599%2017.8857%2015.5589%2017.8872%2015.5576%2017.8877C15.5559%2017.8869%2015.5532%2017.8858%2015.5498%2017.8838L11.041%2015.1631C10.4014%2014.7772%209.59865%2014.7772%208.95898%2015.1631L4.4502%2017.8838C4.44677%2017.8858%204.4441%2017.8869%204.44238%2017.8877C4.44085%2017.8871%204.43936%2017.8859%204.4375%2017.8848L5.66113%2012.8193C5.8271%2012.1321%205.61431%2011.416%205.11523%2010.9297L5.01172%2010.835L1.01367%207.45312L6.27246%207.03711C7.01627%206.97814%207.67205%206.51246%207.96387%205.81934L9.99121%201.00098C9.99362%201.00054%209.99658%201%2010%201C10.003%201%2010.0056%201.00062%2010.0078%201.00098Z'%20stroke='%2302060A'%20stroke-width='2'/%3e%3c/svg%3e",import.meta.url).href,m={section:".success-stories",swiper:"[data-success-swiper]",wrapper:".success-stories__swiper .swiper-wrapper",pagination:".success-stories__pagination",prevBtn:"[data-success-prev]",nextBtn:"[data-success-next]"},ye=S.create({baseURL:pe,timeout:1e4});async function we(){const{data:e}=await ye.get(fe),t=(e==null?void 0:e.feedbacks)??[];return Array.isArray(t)?t:[]}function be(e){let t=e.querySelector(".success-stories__loader");return t||(t=document.createElement("div"),t.className="success-stories__loader is-hidden",t.setAttribute("aria-hidden","true"),t.textContent="Loading...",e.prepend(t)),t}function T(e,t){be(e).classList.toggle("is-hidden",!t);const n=e.querySelector(m.prevBtn),a=e.querySelector(m.nextBtn);n&&(n.disabled=t),a&&(a.disabled=t)}function O(e,t){let s=e.querySelector(".success-stories__error");s||(s=document.createElement("p"),s.className="success-stories__error",e.append(s)),s.textContent=t}function R(e=""){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function W(e){const t=Number(e);if(Number.isNaN(t))return 0;const s=Math.max(0,Math.min(5,t));return Math.round(s*2)/2}function Se(e){const t=R((e==null?void 0:e.author)??"Імʼя користувача"),s=R((e==null?void 0:e.description)??""),n=W((e==null?void 0:e.rate)??0);return`
    <div class="swiper-slide">
      <article class="story-card">
        <div class="story-card__rating" data-rating="${n}" aria-label="Рейтинг: ${n} з 5">
          <div class="rating-js"></div>
        </div>

        <p class="story-card__text">${s}</p>
        <p class="story-card__author">${t}</p>
      </article>
    </div>
  `}function Me(e,t){e.innerHTML=t.map(Se).join("")}function Ce(e){e.querySelectorAll(".story-card__rating").forEach(t=>{const s=W(t.dataset.rating),n=t.querySelector(".rating-js");if(!n)return;n.innerHTML="",new J(n,{score:s,number:5,readOnly:!0,half:!0,starOff:he,starOn:Le,starHalf:ve}).init()})}function $e(e){const t=e.querySelector(m.swiper);return t?new N(t,{modules:[I,D],slidesPerView:1,spaceBetween:24,speed:500,navigation:{nextEl:e.querySelector(m.nextBtn),prevEl:e.querySelector(m.prevBtn),disabledClass:"is-disabled"},pagination:{el:e.querySelector(m.pagination),clickable:!0,dynamicBullets:!1,dynamicMainBullets:6},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:2,spaceBetween:32}}}):null}async function ke(){const e=document.querySelector(m.section);if(!e)return;const t=e.querySelector(m.wrapper);if(t){T(e,!0);try{const a=(await we()).slice(0,5);if(a.length<ge){O(e,"Недостатньо відгуків для відображення секції.");return}if(Me(t,a),!$e(e))return;Ce(e)}catch(s){console.error("Success stories error:",s),O(e,"Не вдалося завантажити відгуки. Спробуйте пізніше.")}finally{T(e,!1)}}}ke();
//# sourceMappingURL=index.js.map
